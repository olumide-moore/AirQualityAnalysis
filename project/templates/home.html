{% extends 'base.html' %}

{% load static %}

{% block title %}Welcome{% endblock %}

{% block content %}



  {% include 'inputs.html' %}  
  <div class="grid lg:grid-cols-4 sm:grid-cols-2 gap-4 bg-white p-6 rounded-sm shadow-xs"> 

    <div class="col-span-2 flex flex-col justify-between space-y-10 ">
      <div>
        <h2 class="text-lg md:text-xl lg:text-2xl font-bold text-gray-700 mb-10">
          Air Quality Index
        </h2>
        <!-- AQI Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 lg:gap-48 lg:grid-cols-3 lg:pt-20 gap-8 items-stretch">
          <!-- NO2 card-->
          <div class="text-black rounded-2xl shadow-lg overflow-hidden flex flex-col justify-between p-4 w-56 h-36 bg-gray-300" id="no2card">
            <div class="flex justify-end items-center mt-2 mr-2">
              <img src="{% static 'icons/no2.svg' %}" alt="NO2" class="w-10 h-10">
            </div>
            <div class="flex-grow">
              <div class="font-bold text-xl">
                <span id="no2AQIDesc" class="text-xl"></span>
              </div>
              <div class="text-md">
                <div>NO2 Daily AQI - <span id="no2AQI"></span></div>
              </div>
            </div>
          </div>
          <!-- PM2.5 card -->
          <div class="text-black rounded-2xl shadow-lg overflow-hidden flex flex-col justify-between p-4 w-56 h-36 bg-gray-300" id="pm2_5card">
            <div class="flex justify-end items-center">
              <img src="{% static 'icons/pm2_5.svg' %}" alt="PM2_5" class="w-12 h-12">
            </div>
            <div class="flex-grow">
              <div class="font-bold text-xl">
                <span id="pm2_5AQIDesc" class="text-xl"></span>
              </div>
              <div class="text-md">
                <div>PM2.5 Daily AQI - <span id="pm2_5AQI"></span></div>
              </div>
            </div>
          </div>

          <!-- PM10 card -->
          <div class="text-black rounded-2xl shadow-lg overflow-hidden flex flex-col justify-between p-4 w-56 h-36 bg-gray-300"
              id="pm10card">
            <div class="flex justify-end items-center mt-1 mr-2">
              <img src="{% static 'icons/pm10.svg' %}" alt="PM10" class="w-10 h-10">
            </div>
            <div class="flex-grow">
              <div class="font-bold text-xl">
                <span id="pm10AQIDesc" class="text-xl"></span>
              </div>
              <div class="text-md">
                <div>PM10 Daily AQI - <span id="pm10AQI"></span></div>
              </div>
            </div>
          </div>
        </div>  
      </div>

         <!--AQI Guide Legend Table-->
      <div class="col-span-2 row-span-2 p-6 rounded-sm shadow-xs">
        <div class="flex items-end space-x-4">
          <div onclick="toggleLegend('aqiGuideLegend')" class="cursor-pointer bg-gray-300 text-sm m-2 p-2 rounded-md shadow hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 w-32" tabindex="0">
            Legend <span id="toggleLegendSymbol">  ▲</span>
          </div>
          <table class="table-auto w-full border-collapse border border-gray-400" style="display: none;" id="aqiGuideLegend">
            <tbody class="text-sm" >
              <tr>
                <th class="px-4 py-2 border-r border-gray-400">Air Pollution Banding</th>
                <td class="px-4 py-2 border-r border-gray-400" colspan="3">Low</td>
                <td class="px-4 py-2 border-r border-gray-400" colspan="3">Moderate</td>
                <td class="px-4 py-2 border-r border-gray-400" colspan="3">High</td>
                <td class="px-4 py-2 border-r border-gray-400">Very High</td>
              </tr>
              <tr>
                <th class="px-4 py-2 border-r border-gray-400">AQI Value</th>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #a0fc9c;">1</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #38fc04;">2</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #38cc04;">3</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #fffc04;">4</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #fccc04;">5</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #ff9c04;">6</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #ff6464;">7</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #ff0404;">8</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #a00404;">9</td>
                <td class="px-4 py-2 border-r border-gray-400" style="background-color: #d034fc;">10</td>
            </tr>
            </tbody>
          </table>
        </div>
        <div class="grid grid-cols-1 py-4">
          <div>
            <a href="{%url 'aqiguide' %}" target="_blank" class="text-indigo-600 hover:text-indigo-900 transition duration-300 ease-in-out">
                How was the AQI calculated?
            </a>
            </div>
            <div>
            <a href="https://uk-air.defra.gov.uk/air-pollution/daqi" target="_blank" class="text-indigo-600 hover:text-indigo-900 transition duration-300 ease-in-out">
              Learn more about the air quality index and health advice
            </a>
          </div>
        </div>

      </div>
    </div>
    
    <!-- Sensor Info Table-->
    <div class="col-span-2 p-2 w-1/2 lg:ml-auto shadow-sm">
      <table class="w-full border-collapse border-[1px] text-sm">
        <tbody>
          <tr class="font-bold text-gray-800">
            <td colspan="2" class="px-4 py-3"></td>
          </tr>
          <tr class="bg-gray-100">
            <td class="px-4 py-2 font-bold">Sensor Type</td>
            <td id="sensorType" class="px-4 py-2"></td>
          </tr>
          <tr>
            <td class="px-4 py-2 font-bold">ID</td>
            <td id="sensorId" class="px-4 py-2"></td>
          </tr>
          <tr class="bg-gray-100">
            <td class="px-4 py-2 font-bold">Last updated</td>
            <td id="lastUpdated" class="px-4 py-2"></td>
          </tr>
          <tr>
            <td class="px-4 py-2 font-bold">NO2 (µg m-3)</td>
            <td id="no2Value" class="px-4 py-2"></td>
          </tr>
          <tr class="bg-gray-100">
            <td class="px-4 py-2 font-bold">PM2.5 (µg m-3)</td>
            <td id="pm2_5Value" class="px-4 py-2"></td>
          </tr>
          <tr>
            <td class="px-4 py-2 font-bold">PM10 (µg m-3)</td>
            <td id="pm10Value" class="px-4 py-2"></td>
          </tr>
        </tbody>
      </table>
    </div>
    
  </div>

  <div class="flex flex-col mx-5 my-7">
    <div>
      <ul class="flex">
        <li class="mr-1">
          <button class="py-2 px-4 inline-block periodTabs" id="hourlyTab" onclick="switchPeriodTab(event, 'HourlyBarCharts')"> Hourly averages
          </button>
        </li>
        <li class="mr-1">
          <button class="py-2 px-4 inline-block periodTabs" id="rawdataTab" onclick="switchPeriodTab(event, 'RawDataLineCharts')"> Raw Data
          </button>
        </li>
      </ul>
    </div>

    <div class="bg-white">
      <!-- Hourly averages bars-->
      <div id="hourlyBarCharts">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div class="p-4 border-gray-300 border-[1px] my-2 bg-white ml-2">
            <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">
              NO2 Hourly averages
            </h2>
            <div><canvas id="no2HourlyAvgChart"></canvas></div>
          </div>
          <div class="p-4 border-gray-300 border-[1px] my-2 bg-white">
            <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">
              PM2.5 Hourly averages
            </h2>
            <div><canvas id="pm2_5HourlyAvgChart"></canvas></div>
          </div>
          <div class="p-4 border-gray-300 border-[1px] my-2 bg-white mr-2">
            <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">
              PM10 Hourly averages
            </h2>
            <div><canvas id="pm10HourlyAvgChart"></canvas></div>
          </div>
        </div>
      </div>

      <!-- Raw Data Line Charts -->
      <div id="rawdataLineCharts">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          <div class="p-4 border-gray-300 border-[1px] my-2 bg-white ml-2">
            <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">NO2 Data</h2>
            <div><canvas id="no2LineChart"></canvas></div>
          </div>
          <div class="p-4 border-gray-300 border-[1px] my-2 bg-white">
            <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">PM2.5 Data</h2>
            <div><canvas id="pm2_5LineChart"></canvas></div>
          </div>
          <div class="p-4 border-gray-300 border-[1px] my-2 bg-white mr-2">
            <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">PM10 Data</h2>
            <div><canvas id="pm10LineChart"></canvas></div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="flex flex-col p-5 my-10">
    <div>
      <h2 class="text-lg font-medium leading-6 text-gray-900 mb-4 px-4 py-3 inline-block hover:border-gray-300">
        Compare selected date against:
      </h2>
      <!-- Compare trend Tabs -->
      <ul class="flex">
        <li class="mr-1">
          <button id="last7daysTab" class="py-2 px-4 inline-block multiChartComparisonTabs" onclick="switchDaysComparisonTab(event, 'Last7Days')"> Last 7 Days</button>
        </li>
        <li class="mr-1">
          <button  id="last7weeksTab" class="py-2 px-4 inline-block multiChartComparisonTabs" onclick="switchDaysComparisonTab(event, 'SameDayLast7Weeks')"> Same day for last 7 weeks</button>
        </li>
      </ul>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 bg-white">
      <div class="p-4 border-gray-300 border-[1px] my-2 bg-white ml-2">
        <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">
          NO2
        </h2>
        <div>
          <canvas id="no2ComparisonMultiChart"></canvas>
        </div>
      </div>
      <div class="p-4 border-gray-300 border-[1px] my-2 bg-white">
        <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">
          PM2.5
        </h2>
        <div>
          <canvas id="pm2_5ComparisonMultiChart"></canvas>
        </div>
      </div>
      <div class="p-4 border-gray-300 border-[1px] my-2 bg-white mr-2">
        <h2 class="text-sm font-medium leading-6 text-gray-900 mb-4">
          PM10
        </h2>
        <div>
          <canvas id="pm10ComparisonMultiChart"></canvas>
        </div>
      </div>
    </div>
  </div>

  <!-- Map -->
  <div id="map" class="z-0"></div>
{% endblock %}

{% block scripts %}
<script type="text/javascript" src="{% static 'js/home.js' %}"></script>

{% endblock %}
